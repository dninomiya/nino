# Agents

## 実装フロー

1. Drizzle スキーマの更新 /packages/db/schemas/
2. /packages/db でマイグレーション
3. /packages/db/types/ にDrizzleスキーマを使って型を定義
  - `export type Task = typeof taskSchema.tasks.$inferSelect;`
4. /packages/db/zod/ にDrizzleスキーマを使ってZodスキーマを定義
  - `export const insertTaskSchema = createInsertSchema(tasks, {title: ...});`
5. 各アプリケーションで使用

## Interactions

- 保存中、ボタンのラベルを保存中...などと変更するのではなく、ボタンの横に shadcn/ui の Spinner を表示する

## Forms

- プレースホルダーは空であることを示すために使う。文末は「...」で終わること。
- autoComplete は選択的に有効化する。明確なフィールド以外では無効化する。
- スペルチェックは選択的に有効化する。メールアドレス、コード、ユーザー名などには無効化する。
- 入力をブロックしないこと。たとえ数値のみを受け付けるフィールドでも、どんな入力でも許可し、バリデーションのフィードバックを表示する。入力自体を完全にブロックすると、ユーザーには理由がわからず混乱するため避けること。
- 曖昧さを避ける。ラベルは明確かつ具体的にする。
  - ボタンラベルが「続行」となっている場合、「APIキーを保存」など、具体的な内容に変更する。

## Copywriting

- エラーメッセージは解決方法まで案内すること。何が問題かだけでなく、ユーザーがどうすれば直せるかまで明記する。
  - 例: 「無効なAPIキーです」ではなく、「APIキーが間違っているか期限切れです。アカウント設定で新しいキーを生成してください。」のように、コピーやボタン・リンクがユーザーに学びや具体的なアクションを示すようにする。
- メッセージは前向きな言葉を基本とし、エラーも含めてユーザーを励ます・解決につながる表現にする。
  - 例えば「デプロイに失敗しました」ではなく、「問題が発生しました。再試行するかサポートにご連絡ください。」のように案内する。

## Content

- すべての状態を設計する。空、疎、密、エラー状態。

## Zod

- 文字列を必須入力にする場合、.trim().min(1, "...") を使用する。

## Commit

- コミットメッセージは conventional commits に従う。

## Accessibility

- アイコンボタンは `<span className="sr-only">...</span>` を使用してラベルを含める。